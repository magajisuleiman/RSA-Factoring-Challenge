#!/usr/bin/python3
import sys
import math

def is_prime(number):
    if number == 2 or number == 3:
        return True
    if number % 2 == 0 or number == 1:
        return False
    sqrt_num = int(math.sqrt(number)) + 1
    for i in range(3, sqrt_num, 2):
        if number % i == 0:
            return False
    return True

def factorize(number):
    if is_prime(number):
        return None
    for i in range(2, int(math.sqrt(number)) + 1):
        if number % i == 0:
            return i, number // i
    return None

if len(sys.argv) != 2:
    print("Usage: factors <file>")
    sys.exit(1)

file_name = sys.argv[1]

try:
    with open(file_name, 'r') as file:
        lines = file.readlines()
        for line in lines:
            number = int(line.strip())
            factors = factorize(number)
            if factors is not None:
                p, q = factors
                print(f"{number} = {p} * {q}")
            else:
                print(f"The number {number} is a prime number")
except FileNotFoundError:
    print(f"Error: File '{file_name}' not found")
    sys.exit(1)
except ValueError:
    print("Error: Invalid number in the file")
    sys.exit(1)

